<script>
    const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    const circlesv = entry.target.querySelector('.circlesv');

    if (entry.isIntersecting) {
      circlesv.classList.add('animsv');
	  return;
    }
    circlesv.classList.remove('animsv');
  });

    entries.forEach(entry => {
        const circleas = entry.target.querySelector('.circleas');
    
        if (entry.isIntersecting) {
        circleas.classList.add('animas');
        return; 
        }
        circleas.classList.remove('animas');
    });

    entries.forEach(entry => {
        const circleTW = entry.target.querySelector('.circleTW');
    
        if (entry.isIntersecting) {
        circleTW.classList.add('animTW');
        return; 
        }
        circleTW.classList.remove('animTW');
    });

    entries.forEach(entry => {
        const circlePG = entry.target.querySelector('.circlePG');
    
        if (entry.isIntersecting) {
        circlePG.classList.add('animPG');
        return; 
        }
        circlePG.classList.remove('animPG');
    });
});

observer.observe(document.querySelector('.framework'));
</script>

<script>
    import {gsap} from "gsap";
    
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        const pres = entry.target.querySelector('.framework');
    
        if (entry.isIntersecting) {
            let tl1 = gsap.timeline({
                    scrollTrigger:{
                        trigger: ".framework",
                        start: "center 50%",
                        end: "bottom bottom",
                        scrub: false,
                        markers: true,
                        toggleActions: 'play reverse play reverse'
                    }
                })
                tl1.to(".framework", {
                    duration:3,
                    opacity:1,
                    y: -100,
                    ease: "power4.out"
                })
        }
      });
    });
        
    observer.observe(document.querySelector('.framework'));
    </script>

<section class="box framework">
        <div class="stack gap-2 lg:gap-4">
            <div class="outer">
                <div class="inner">
                    <img id={`image-astro`} src="/Portfolio/assets/astro.webp" alt="Description" class="image">
                </div>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="144px" height="144px">
                <circle cx="72" cy="72" r="63" stroke-linecap="round" class="circleas"/>
            </svg>
        </div>
            <div class="stack gap-2 lg:gap-4">
                <div class="outer">
                    <div class="inner">
                        <img id={`image-svelte`} src="/Portfolio/assets/svelte.webp" alt="Description" class="image">
                    </div>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="144px" height="144px">
                    <circle cx="72" cy="72" r="63" stroke-linecap="round" class="circlesv"/>
                </svg>
            </div>
            <div class="stack gap-2 lg:gap-4">
                <div class="outer">
                    <div class="inner">
                        <img id={`image-TailWindCSS`} src="/Portfolio/assets/tailwindcss.webp" alt="Description" class="image">
                    </div>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="144px" height="144px">
                    <circle cx="72" cy="72" r="63" stroke-linecap="round" class="circleTW"/>
                </svg>
            </div>
            <div class="stack gap-2 lg:gap-4">
                <div class="outer">
                    <div class="inner">
                        <img id={`image-PostGreSQL`} src="/Portfolio/assets/postgresql.webp" alt="Description" class="image">
                    </div>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="144px" height="144px">
                    <circle cx="72" cy="72" r="63" stroke-linecap="round" class="circlePG"/>
                </svg>
            </div>

</section>

<style>
    .framework {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    margin: auto;
    margin-bottom: 100dvh;
    opacity: 0;
    }

    .image {
    width: 40%;
    height: 40%;
    object-fit: cover;
    }

	@media (min-width: 50em) {

		.framework {
			display: grid;
			grid-template-columns: repeat(4, 1fr);
			gap: 2rem;
		}}
    
    @media (max-width: 1200px) {
        .framework {
        grid-template-columns: repeat(3, 2fr);
        margin-bottom: 10dvh;
        }
    }
    @media (max-width: 1000px) {
        .framework {
        grid-template-columns: repeat(2, 3fr);
        margin-bottom: 20dvh;
        }
    }
    @media (max-width: 800px) {
        .framework {
        grid-template-columns: repeat(1, 4fr);
        margin-bottom: 30dvh;
        }
    }
    .stack{
        width: 144px;
        height: 144px;
        margin: 1rem;
        position: relative;
    }

    .outer{
        width: 144px;
        height: 144px;
        padding: 18px;
        box-shadow: 1.5px 1.5px 2.5px -0.25px rgba(0,0,0,0.15), -1.5px -1.5px 2.5px -0.25px rgba(255,255,255,0.7);
        border-radius: 50%;
    }

    .inner{
        height: 108px;
        width: 108px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: inset 1px 1px 1.5px -0.25px rgba(0,0,0,0.2), inset -1px -1px 1.5px -0.25px rgba(255,255,255,0.7), -0.125px -0.125px 0px rgba(255, 255, 255, 1), 0.125 0.125px 0px rgba(0, 0, 0, 0.15), 0px 3px 2.5px -2.5px rgba(0, 0, 0, 0.05);
        border-radius: 50%;
    }

    #number{
        font-weight: 540;
        color: #555;
        font-size: 27px;
    }

    .circlesv{
        fill: none;
        stroke: url(#GradientColor);
        stroke-width: 18px;
        stroke-dasharray: 450;
        stroke-dashoffset: 450;
    }

    .circleas{
        fill: none;
        stroke: url(#GradientColor);
        stroke-width: 18px;
        stroke-dasharray: 450;
        stroke-dashoffset: 450;
    }

    .circleTW{
        fill: none;
        stroke: url(#GradientColor);
        stroke-width: 18px;
        stroke-dasharray: 450;
        stroke-dashoffset: 450;
    }

    .circlePG{
        fill: none;
        stroke: url(#GradientColor);
        stroke-width: 18px;
        stroke-dasharray: 450;
        stroke-dashoffset: 450;
    }

    .animsv{
        animation: animsv 1s linear forwards;
    }

    .animas{
        animation: animas 1s linear forwards;
    }

    .animTW{
        animation: animTW 1s linear forwards;
    }

    .animPG{
        animation: animPG 1s linear forwards;
    }

    @keyframes animsv{
        100%{
            stroke-dashoffset: 170;
        }
    }

    @keyframes animas{
        100%{
            stroke-dashoffset: 140;
        }
    }

    @keyframes animTW{
        100%{
            stroke-dashoffset: 290;
        }
    }

    @keyframes animPG{
        100%{
            stroke-dashoffset: 240;
        }
    }


    svg{
        position: absolute;
        top: 0;
        left: 0;
    }
</style>